<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>命令行工具 | AdonisJs</title>
    <meta name="description" content="优雅的 Node.js web 框架">
    
    
    <link rel="preload" href="/adonisjs-cn/assets/css/0.styles.07756e39.css" as="style"><link rel="preload" href="/adonisjs-cn/assets/js/app.c41742cd.js" as="script"><link rel="preload" href="/adonisjs-cn/assets/js/2.b1db5fd3.js" as="script"><link rel="preload" href="/adonisjs-cn/assets/js/30.9173a22a.js" as="script"><link rel="prefetch" href="/adonisjs-cn/assets/js/10.1ed38306.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/11.2ba24294.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/12.d4817e8b.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/13.e96a7091.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/14.e1295915.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/15.4bf8099d.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/16.521ed7e6.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/17.3bcb33e1.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/18.ab54521b.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/19.f103b066.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/20.30ac3b4e.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/21.e8d4fbf0.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/22.6e24fd7a.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/23.8815a834.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/24.69934c30.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/25.3fa2bb64.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/26.e31719b9.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/27.c28e8720.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/28.78c6f3a1.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/29.c92ae8e7.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/3.a44ce1dc.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/31.8b1e08b5.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/32.c9bebadf.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/33.be983ab0.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/34.2e89255e.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/35.c239e37e.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/36.2b1f61a2.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/37.e4d75aad.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/38.46fd820c.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/39.f6212003.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/4.2b558e94.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/40.4fa920ef.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/41.4c80303a.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/42.921b4d8d.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/43.c3ed0f4b.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/44.403405dd.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/45.271974c0.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/46.ecd424a7.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/47.42f04805.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/48.dc2e267a.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/49.26cdf688.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/5.aafb1e29.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/50.3554bab0.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/51.43f09c88.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/52.47cfcab7.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/53.00a79228.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/54.b49c2b5c.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/55.d1d80aaf.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/56.ed0ebcd5.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/57.86f91034.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/58.729e2925.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/59.1bcb2cc7.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/6.c3cc58ad.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/60.20f13b4e.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/61.35271767.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/62.0d83dda5.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/63.2622ecdd.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/64.f98b218c.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/65.557e2843.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/66.2052b6e7.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/67.3067371e.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/68.8ece6c0a.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/69.49b464cb.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/7.297610bf.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/70.228d7edb.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/8.bc62987d.js"><link rel="prefetch" href="/adonisjs-cn/assets/js/9.817f0e90.js">
    <link rel="stylesheet" href="/adonisjs-cn/assets/css/0.styles.07756e39.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/adonisjs-cn/" class="home-link router-link-active"><!----> <span class="site-name">AdonisJs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/adonisjs-cn/" class="nav-link">首页</a></div><div class="nav-item"><a href="/adonisjs-cn/start/" class="nav-link">快速开始</a></div><div class="nav-item"><a href="/adonisjs-cn/guides/preface/about.html" class="nav-link">指南</a></div><div class="nav-item"><a href="/adonisjs-cn/recipes/recipes/nginx-proxy.html" class="nav-link">专题</a></div><div class="nav-item"><a href="https://adonisjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  官网
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/adonisjs-cn/" class="nav-link">首页</a></div><div class="nav-item"><a href="/adonisjs-cn/start/" class="nav-link">快速开始</a></div><div class="nav-item"><a href="/adonisjs-cn/guides/preface/about.html" class="nav-link">指南</a></div><div class="nav-item"><a href="/adonisjs-cn/recipes/recipes/nginx-proxy.html" class="nav-link">专题</a></div><div class="nav-item"><a href="https://adonisjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  官网
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>序言</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/adonisjs-cn/guides/preface/why.html" class="sidebar-link">为什么要翻译 AdonisJs？</a></li><li><a href="/adonisjs-cn/guides/preface/about.html" class="sidebar-link">关于 AdonisJs</a></li><li><a href="/adonisjs-cn/guides/preface/upgrade.html" class="sidebar-link">从4.0版本升级到4.1版本</a></li><li><a href="/adonisjs-cn/guides/preface/contribution.html" class="sidebar-link">贡献指南</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>主要概念</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/adonisjs-cn/guides/concept/request-lifecycle.html" class="sidebar-link">Request 生命周期</a></li><li><a href="/adonisjs-cn/guides/concept/ioc-container.html" class="sidebar-link">IoC 容器</a></li><li><a href="/adonisjs-cn/guides/concept/service-provider.html" class="sidebar-link">服务提供者</a></li><li><a href="/adonisjs-cn/guides/concept/ignitor.html" class="sidebar-link">启动装置</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>快速开始</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/adonisjs-cn/guides/started/installation.html" class="sidebar-link">安装</a></li><li><a href="/adonisjs-cn/guides/started/configuration.html" class="sidebar-link">配置</a></li><li><a href="/adonisjs-cn/guides/started/directory-structure.html" class="sidebar-link">目录结构</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>基础入门</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/adonisjs-cn/guides/basics/routing.html" class="sidebar-link">路由</a></li><li><a href="/adonisjs-cn/guides/basics/middleware.html" class="sidebar-link">中间件</a></li><li><a href="/adonisjs-cn/guides/basics/controller.html" class="sidebar-link">控制器</a></li><li><a href="/adonisjs-cn/guides/basics/request.html" class="sidebar-link">请求</a></li><li><a href="/adonisjs-cn/guides/basics/response.html" class="sidebar-link">响应</a></li><li><a href="/adonisjs-cn/guides/basics/view.html" class="sidebar-link">视图</a></li><li><a href="/adonisjs-cn/guides/basics/session.html" class="sidebar-link">Session</a></li><li><a href="/adonisjs-cn/guides/basics/validator.html" class="sidebar-link">验证器</a></li><li><a href="/adonisjs-cn/guides/basics/error-handling.html" class="sidebar-link">异常处理</a></li><li><a href="/adonisjs-cn/guides/basics/logger.html" class="sidebar-link">logger 调试</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>安全</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/adonisjs-cn/guides/security/introduction.html" class="sidebar-link">介绍</a></li><li><a href="/adonisjs-cn/guides/security/authentication.html" class="sidebar-link">权限认证</a></li><li><a href="/adonisjs-cn/guides/security/cors.html" class="sidebar-link">CORS</a></li><li><a href="/adonisjs-cn/guides/security/csrf-protection.html" class="sidebar-link">CSRF</a></li><li><a href="/adonisjs-cn/guides/security/encryption.html" class="sidebar-link">加密</a></li><li><a href="/adonisjs-cn/guides/security/shield-middleware.html" class="sidebar-link">屏蔽中间件</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>深入了解</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/adonisjs-cn/guides/deeper/ace-commands.html" class="active sidebar-link">命令行工具</a></li><li><a href="/adonisjs-cn/guides/deeper/event.html" class="sidebar-link">事件</a></li><li><a href="/adonisjs-cn/guides/deeper/extend-core.html" class="sidebar-link">扩展内核</a></li><li><a href="/adonisjs-cn/guides/deeper/file-upload.html" class="sidebar-link">文件上传</a></li><li><a href="/adonisjs-cn/guides/deeper/file-storage.html" class="sidebar-link">文件存储</a></li><li><a href="/adonisjs-cn/guides/deeper/helper.html" class="sidebar-link">帮助</a></li><li><a href="/adonisjs-cn/guides/deeper/international.html" class="sidebar-link">国际化</a></li><li><a href="/adonisjs-cn/guides/deeper/mail.html" class="sidebar-link">邮箱</a></li><li><a href="/adonisjs-cn/guides/deeper/social-authentication.html" class="sidebar-link">公共认证</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>数据库</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/adonisjs-cn/guides/database/start.html" class="sidebar-link">快速开始</a></li><li><a href="/adonisjs-cn/guides/database/query-builder.html" class="sidebar-link">查询构造器</a></li><li><a href="/adonisjs-cn/guides/database/migration.html" class="sidebar-link">数据库迁移</a></li><li><a href="/adonisjs-cn/guides/database/seeds-factory.html" class="sidebar-link">假数据填充</a></li><li><a href="/adonisjs-cn/guides/database/redis.html" class="sidebar-link">Redis缓存</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Lucid模型</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/adonisjs-cn/guides/orm/start.html" class="sidebar-link">快速开始</a></li><li><a href="/adonisjs-cn/guides/orm/hooks.html" class="sidebar-link">Hooks 函数</a></li><li><a href="/adonisjs-cn/guides/orm/traits.html" class="sidebar-link">Traits</a></li><li><a href="/adonisjs-cn/guides/orm/mutator.html" class="sidebar-link">修改器</a></li><li><a href="/adonisjs-cn/guides/orm/relationships-one.html" class="sidebar-link">关联(一)</a></li><li><a href="/adonisjs-cn/guides/orm/relationships-two.html" class="sidebar-link">关联(二)</a></li><li><a href="/adonisjs-cn/guides/orm/serialization.html" class="sidebar-link">序列化</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>websocket</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/adonisjs-cn/guides/websockets/start.html" class="sidebar-link">快速开始</a></li><li><a href="/adonisjs-cn/guides/websockets/philosophy.html" class="sidebar-link">思想</a></li><li><a href="/adonisjs-cn/guides/websockets/server-api.html" class="sidebar-link">服务端接口</a></li><li><a href="/adonisjs-cn/guides/websockets/client-api.html" class="sidebar-link">客户端接口</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>测试</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/adonisjs-cn/guides/testing/start.html" class="sidebar-link">快速开始</a></li><li><a href="/adonisjs-cn/guides/testing/http-test.html" class="sidebar-link">HTTP 测试</a></li><li><a href="/adonisjs-cn/guides/testing/browser-test.html" class="sidebar-link">浏览器测试</a></li><li><a href="/adonisjs-cn/guides/testing/fakes.html" class="sidebar-link">Fake</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>结语</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/adonisjs-cn/guides/finally/about.html" class="sidebar-link">写在最后</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="命令行工具"><a href="#命令行工具" aria-hidden="true" class="header-anchor">#</a> 命令行工具</h1> <p>Ace 是为 AdonisJs 精心设计的强大命令行工具。</p> <p>到目前为止，你已使用各种 Ace 命令生成控制器，模型或运行迁移。</p> <p>在本指南中，我们将了解 Ace 内部以及如何创建命令。</p> <h2 id="介绍"><a href="#介绍" aria-hidden="true" class="header-anchor">#</a> 介绍</h2> <p>每个 AdonisJs 项目在项目根目录中都有一个 ace 文件，这是一个常规 JavaScript 文件但没有 .js 扩展名。</p> <p>ace 文件用于执行特定于项目的命令。对于可重用命令，必须将它们捆绑为 npm 包。</p> <p>运行以下代码以查看可用的 Ace 命令列表：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>node ace
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 输出</span>
Usage:
  <span class="token function">command</span> <span class="token punctuation">[</span>arguments<span class="token punctuation">]</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span>

Global Options:
  --env                Set NODE_ENV before running the commands
  --no-ansi            Disable colored output

Available Commands:
  seed                 Seed database using seed files
 migration
  migration:refresh    Refresh migrations by performing rollback and <span class="token keyword">then</span> running from start
  migration:reset      Rollback migration to the first batch
  migration:rollback   Rollback migration to latest batch or a specific batch number
  migration:run        Run all pending migrations
  migration:status     Check migrations current status
</code></pre></div><blockquote><p>为方便起见，adonis 命令代理给定项目的所有命令。例如，运行 adonis migration:run 与运行 node ace migration:run 具有相同的结果。</p></blockquote> <h2 id="创建命令"><a href="#创建命令" aria-hidden="true" class="header-anchor">#</a> 创建命令</h2> <p>让我们快速构建一个 Ace 命令，通过 <a href="http://gophergala.github.io/wisdom" target="_blank" rel="noopener noreferrer">wisdom API<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 从 Paul Graham 中提取随机引号并将它们输出到终端。</p> <h4 id="建立"><a href="#建立" aria-hidden="true" class="header-anchor">#</a> 建立</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>adonis make:command Quote
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>✔ create  app/Commands/Quote.js
┌───────────────────────────────────────────────────────────┐
│        Register <span class="token function">command</span> as follows                        │
│                                                           │
│        1. Open start/app.js                               │
│        2. Add App/Commands/Quote to commands array        │
└───────────────────────────────────────────────────────────┘
</code></pre></div><p>按照输出指令， commands 在 start/app.js 文件中的数组中注册新创建的命令：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> commands <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">'App/Commands/Quote'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><p>现在，如果我们运行 adonis ，我们应该 quote 在可用命令列表中看到命令。</p> <h4 id="显示-quote"><a href="#显示-quote" aria-hidden="true" class="header-anchor">#</a> 显示 quote</h4> <p>使用以下代码替换命令文件中的所有内容：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">'use strict'</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> Command <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'@adonisjs/ace'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> got <span class="token operator">=</span> <span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'got'</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">Quote</span> <span class="token keyword">extends</span> <span class="token class-name">Command</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">signature</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'quote'</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">description</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'Shows inspirational quote from Paul Graham'</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">async</span> <span class="token function">handle</span> <span class="token punctuation">(</span><span class="token parameter">args<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">got</span><span class="token punctuation">(</span><span class="token string">'https://wisdomapi.herokuapp.com/v1/author/paulg/random'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> quote <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>chalk<span class="token punctuation">.</span><span class="token function">gray</span><span class="token punctuation">(</span>quote<span class="token punctuation">.</span>author<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> - </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>chalk<span class="token punctuation">.</span><span class="token function">cyan</span><span class="token punctuation">(</span>quote<span class="token punctuation">.</span>author<span class="token punctuation">.</span>company<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>quote<span class="token punctuation">.</span>content<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> Quote
</code></pre></div><blockquote><p>确保通过 npm 安装获得的包，该命令用于在上面的命令代码中使用 HTTP API 。
Running adonis quote 将检索到的报价打印到终端。</p></blockquote> <h2 id="命令签名"><a href="#命令签名" aria-hidden="true" class="header-anchor">#</a> 命令签名</h2> <p>命令签名定义命令名称，必需/可选选项和标志。</p> <p>签名定义为表达式字符串，如下所示：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">signature</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">'greet { name: Name of the user to greet }'</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在上面的示例签名中：</p> <ul><li><p>greet 是命令名称</p></li> <li><p>{ name } 是运行命令时要传递的必需参数</p></li> <li><p>之后的所有内容都是:前面的参数名称的描述</p></li></ul> <p>命令签名可以使用 ES6 模板文字跨越多行：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">signature</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`
    greet
    { name : Name of the user to greet }
    { age? : User age }
  `</span></span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="可选参数"><a href="#可选参数" aria-hidden="true" class="header-anchor">#</a> 可选参数</h4> <p>通过附加 ? 参数名称，参数可以是可选的：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">'greet { name? : Name of the user to greet }'</span>
</code></pre></div><h4 id="默认值"><a href="#默认值" aria-hidden="true" class="header-anchor">#</a> 默认值</h4> <p>你还可以为参数定义默认值，如下所示：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">'greet { name?=virk : Name of the user to greet }'</span>
</code></pre></div><h4 id="标志"><a href="#标志" aria-hidden="true" class="header-anchor">#</a> 标志</h4> <p>标志带有前缀并且--与参数具有相同的签名：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">signature</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`
    send:email
    { --log : Log email response to the console }
  `</span></span>
<span class="token punctuation">}</span>
</code></pre></div><p>使用上面的示例签名，你可以在 --log 运行命令时传递标志，如下所示：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>adonis send:email --log
</code></pre></div><h4 id="带有值的标志"><a href="#带有值的标志" aria-hidden="true" class="header-anchor">#</a> 带有值的标志</h4> <p>有时你可能希望接受带有标志的值。</p> <p>这可以通过调整签名表达式来完成，如下所示：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">signature</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`
    send:email
    { --driver=@value : Define a custom driver to be used  }
  `</span></span>
<span class="token punctuation">}</span>
</code></pre></div><p>在上面的示例中，=@value 指示 Ace 确保始终使用该 --driver 标志传递值。</p> <h2 id="命令行动"><a href="#命令行动" aria-hidden="true" class="header-anchor">#</a> 命令行动</h2> <p>在 handle 该命令类调用方法在每次执行命令的时间，并且接收的目的 arguments 和 flags ：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token function">handle</span> <span class="token punctuation">(</span><span class="token parameter">args<span class="token punctuation">,</span> flags</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>flags<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>所有参数和标志都以驼峰大小写格式传递。例如，--file-path 标志将被设置为 filePath 传递 flags 对象内的键。</p></blockquote> <h2 id="问题"><a href="#问题" aria-hidden="true" class="header-anchor">#</a> 问题</h2> <p>在命令中，你可以通过询问交互式问题来提示用户提供答案并接受值。</p> <h4 id="ask-question-defaultanswer"><a href="#ask-question-defaultanswer" aria-hidden="true" class="header-anchor">#</a> ask(question, [defaultAnswer])</h4> <p>提示用户输入文本：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token function">handle</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span>
    <span class="token punctuation">.</span><span class="token function">ask</span><span class="token punctuation">(</span><span class="token string">'Enter project name'</span><span class="token punctuation">)</span>

  <span class="token comment">// with default answer</span>
  <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span>
    <span class="token punctuation">.</span><span class="token function">ask</span><span class="token punctuation">(</span><span class="token string">'Enter project name'</span><span class="token punctuation">,</span> <span class="token string">'yardstick'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="secure-question-defaultanswer"><a href="#secure-question-defaultanswer" aria-hidden="true" class="header-anchor">#</a> secure(question, [defaultAnswer])</h4> <p>secure 方法类似于 ask ，但隐藏了用户的输入(在询问敏感信息时很有用，例如密码)：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> password <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span>
  <span class="token punctuation">.</span><span class="token function">secure</span><span class="token punctuation">(</span><span class="token string">'What is your password?'</span><span class="token punctuation">)</span>
<span class="token function">confirm</span><span class="token punctuation">(</span>question<span class="token punctuation">)</span>
</code></pre></div><p>提示用户yes/no回答：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> deleteFiles <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span>
  <span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">'Are you sure you want to delete selected files?'</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="multiple-title-choices-selected"><a href="#multiple-title-choices-selected" aria-hidden="true" class="header-anchor">#</a> multiple(title, choices, [selected])</h4> <p>提示用户提供多项选择题的答案：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> lunch <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span>
  <span class="token punctuation">.</span><span class="token function">multiple</span><span class="token punctuation">(</span><span class="token string">'Friday lunch ( 2 per person )'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token string">'Roasted vegetable lasagna'</span><span class="token punctuation">,</span>
    <span class="token string">'Vegetable &amp; feta cheese filo pie'</span><span class="token punctuation">,</span>
    <span class="token string">'Roasted Cauliflower + Aubergine'</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>你的 choices 数组值可以是对象：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> lunch <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span>
  <span class="token punctuation">.</span><span class="token function">multiple</span><span class="token punctuation">(</span><span class="token string">'Friday lunch ( 2 per person )'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> <span class="token string">'Roasted Cauliflower + Aubergine'</span><span class="token punctuation">,</span>
      value<span class="token punctuation">:</span> <span class="token string">'no 1'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> <span class="token string">'Carrot + Tabbouleh'</span><span class="token punctuation">,</span>
      value<span class="token punctuation">:</span> <span class="token string">'no 2'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>你还可以传递一组预先选定的值：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> lunch <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span>
  <span class="token punctuation">.</span><span class="token function">multiple</span><span class="token punctuation">(</span><span class="token string">'Friday lunch ( 2 per person )'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token string">'Roasted vegetable lasagna'</span><span class="token punctuation">,</span>
    <span class="token string">'Vegetable &amp; feta cheese filo pie'</span><span class="token punctuation">,</span>
    <span class="token string">'Roasted Cauliflower + Aubergine'</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token string">'Roasted vegetable lasagna'</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="choice-question-choices-selected"><a href="#choice-question-choices-selected" aria-hidden="true" class="header-anchor">#</a> choice(question, choices, [selected])</h4> <p>提示用户对多项选择题的单一答案：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span>
  <span class="token punctuation">.</span><span class="token function">choice</span><span class="token punctuation">(</span><span class="token string">'Client to use for installing dependencies'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token string">'yarn'</span><span class="token punctuation">,</span> <span class="token string">'npm'</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>你的 choices 数组值可以是对象：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span>
  <span class="token punctuation">.</span><span class="token function">choice</span><span class="token punctuation">(</span><span class="token string">'Client to use for installing dependencies'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> <span class="token string">'Use yarn'</span><span class="token punctuation">,</span>
      value<span class="token punctuation">:</span> <span class="token string">'yarn'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> <span class="token string">'Use npm'</span><span class="token punctuation">,</span>
      value<span class="token punctuation">:</span> <span class="token string">'npm'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>你还可以传递预选值：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span>
  <span class="token punctuation">.</span><span class="token function">choice</span><span class="token punctuation">(</span><span class="token string">'Client to use for installing dependencies'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> <span class="token string">'Use yarn'</span><span class="token punctuation">,</span>
      value<span class="token punctuation">:</span> <span class="token string">'yarn'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> <span class="token string">'Use npm'</span><span class="token punctuation">,</span>
      value<span class="token punctuation">:</span> <span class="token string">'npm'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'npm'</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="彩色输出"><a href="#彩色输出" aria-hidden="true" class="header-anchor">#</a> 彩色输出</h2> <p>Ace 使用 kleur 向终端输出彩色日志消息。</p> <blockquote><p>你可以通过 this.chalk 访问 kleur 实例 。</p></blockquote> <h3 id="助手方法"><a href="#助手方法" aria-hidden="true" class="header-anchor">#</a> 助手方法</h3> <p>以下帮助程序方法将始终如一的样式消息记录到终端。</p> <h4 id="info-message"><a href="#info-message" aria-hidden="true" class="header-anchor">#</a> info(message)</h4> <p>使用青色将信息消息记录到控制台：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'Something worth sharing'</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="success-message"><a href="#success-message" aria-hidden="true" class="header-anchor">#</a> success(message)</h4> <p>使用绿色将成功消息记录到控制台：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'All went fine'</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="warn-message"><a href="#warn-message" aria-hidden="true" class="header-anchor">#</a> warn(message)</h4> <p>使用黄色将警告消息记录到控制台：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">'Fire in the hole'</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>warn 使用 console.warn 而不是 console.log 。</p></blockquote> <h4 id="error-message"><a href="#error-message" aria-hidden="true" class="header-anchor">#</a> error(message)</h4> <p>使用红色将错误消息记录到控制台：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Something went bad'</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>error 使用 console.error 而不是console.log 。</p></blockquote> <h4 id="completed-action-message"><a href="#completed-action-message" aria-hidden="true" class="header-anchor">#</a> completed(action, message)</h4> <p>将带有消息的操作打印到控制台：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">completed</span><span class="token punctuation">(</span><span class="token string">'create'</span><span class="token punctuation">,</span> <span class="token string">'config/app.js'</span><span class="token punctuation">)</span>
<span class="token comment">// 输出</span>
create<span class="token punctuation">:</span> config<span class="token operator">/</span>app<span class="token punctuation">.</span>js
</code></pre></div><h4 id="failed-action-message"><a href="#failed-action-message" aria-hidden="true" class="header-anchor">#</a> failed(action, message)</h4> <p>使用消息向控制台打印失败的操作：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">failed</span><span class="token punctuation">(</span><span class="token string">'create'</span><span class="token punctuation">,</span> <span class="token string">'config/app.js'</span><span class="token punctuation">)</span>
</code></pre></div><p>failed 使用 console.error 而不是 console.log 。</p> <h4 id="table-head-body"><a href="#table-head-body" aria-hidden="true" class="header-anchor">#</a> table(head, body)</h4> <p>将表格数据打印到控制台：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> head <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Name'</span><span class="token punctuation">,</span> <span class="token string">'Age'</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> body <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'virk'</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'joe'</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">]</span><span class="token punctuation">]</span>

<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">table</span><span class="token punctuation">(</span>head<span class="token punctuation">,</span> body<span class="token punctuation">)</span>
</code></pre></div><div class="language-jbash extra-class"><pre class="language-text"><code># 输出
┌──────┬─────┐
│ Name │ Age │
├──────┼─────┤
│ virk │ 22  │
├──────┼─────┤
│ joe  │ 23  │
└──────┴─────┘
</code></pre></div><p>头行颜色也可以定义：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> head <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Name'</span><span class="token punctuation">,</span> <span class="token string">'Age'</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> body <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'virk'</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'joe'</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span> head<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>

<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">table</span><span class="token punctuation">(</span>head<span class="token punctuation">,</span> body<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</code></pre></div><h4 id="icon-type"><a href="#icon-type" aria-hidden="true" class="header-anchor">#</a> icon(type)</h4> <p>返回给定类型的彩色图标：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">icon</span><span class="token punctuation">(</span><span class="token string">'success'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> Completed`</span></span><span class="token punctuation">)</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>✔ Completed
</code></pre></div><table><thead><tr><th>类型</th> <th>颜色</th> <th>图标</th></tr></thead> <tbody><tr><td>info</td> <td>青色</td> <td>ℹ</td></tr> <tr><td>success</td> <td>绿色</td> <td>✔</td></tr> <tr><td>warn</td> <td>黄色</td> <td>⚠</td></tr> <tr><td>error</td> <td>红色</td> <td>✖</td></tr></tbody></table> <h2 id="文件管理"><a href="#文件管理" aria-hidden="true" class="header-anchor">#</a> 文件管理</h2> <p>通过提供 Promise 第一个 API ， Ace 可以轻松地与文件系统进行交互。</p> <h3 id="writefile-location-contents"><a href="#writefile-location-contents" aria-hidden="true" class="header-anchor">#</a> writeFile(location, contents)</h3> <p>将文件写入给定位置(自动创建缺少的目录)：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>Helpers<span class="token punctuation">.</span><span class="token function">appRoot</span><span class="token punctuation">(</span><span class="token string">'Models/User.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'…'</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="ensurefile-location"><a href="#ensurefile-location" aria-hidden="true" class="header-anchor">#</a> ensureFile(location)</h4> <p>确保文件存在，否则创建一个空文件：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">ensureFile</span><span class="token punctuation">(</span>Helpers<span class="token punctuation">.</span><span class="token function">appRoot</span><span class="token punctuation">(</span><span class="token string">'Models/User.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="ensuredir-location"><a href="#ensuredir-location" aria-hidden="true" class="header-anchor">#</a> ensureDir(location)</h4> <p>确保目录存在，否则创建一个空目录：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">ensureDir</span><span class="token punctuation">(</span>Helpers<span class="token punctuation">.</span><span class="token function">appRoot</span><span class="token punctuation">(</span><span class="token string">'Models'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="pathexists-location"><a href="#pathexists-location" aria-hidden="true" class="header-anchor">#</a> pathExists(location)</h4> <p>返回一个布尔值，指示路径是否存在：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> exists <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pathExists</span><span class="token punctuation">(</span><span class="token string">'some-location'</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>exists<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// do something</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="removefile-location"><a href="#removefile-location" aria-hidden="true" class="header-anchor">#</a> removeFile(location)</h4> <p>从给定位置删除文件：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeFile</span><span class="token punctuation">(</span><span class="token string">'some-location'</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="removedir-location"><a href="#removedir-location" aria-hidden="true" class="header-anchor">#</a> removeDir(location)</h4> <p>从给定位置删除目录：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeDir</span><span class="token punctuation">(</span><span class="token string">'some-location'</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="readfile-location"><a href="#readfile-location" aria-hidden="true" class="header-anchor">#</a> readFile(location)</h4> <p>读取给定文件的内容：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> contents <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'some-location'</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="copy-src-dest"><a href="#copy-src-dest" aria-hidden="true" class="header-anchor">#</a> copy(src, dest)</h4> <p>将文件/目录从一个位置复制到另一个位置：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> dest<span class="token punctuation">)</span>
</code></pre></div><h4 id="move-src-dest"><a href="#move-src-dest" aria-hidden="true" class="header-anchor">#</a> move(src, dest)</h4> <p>将文件/目录从一个位置移动到另一个位置：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> dest<span class="token punctuation">)</span>
</code></pre></div><h2 id="数据库连接管理"><a href="#数据库连接管理" aria-hidden="true" class="header-anchor">#</a> 数据库连接管理</h2> <p>在 Ace 命令中使用数据库访问(通过 Lucid 或直接)时，你必须记住手动关闭数据库连接：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Database<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>一个更完整的例子：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> Database <span class="token operator">=</span> <span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'Database'</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">Quote</span> <span class="token keyword">extends</span> <span class="token class-name">Command</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">signature</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'quote'</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">description</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'Shows inspirational quote from Paul Graham'</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">async</span> <span class="token function">handle</span> <span class="token punctuation">(</span><span class="token parameter">args<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> quote <span class="token operator">=</span> <span class="token keyword">await</span> Quote<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orderByRaw</span><span class="token punctuation">(</span><span class="token string">'rand()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>quote<span class="token punctuation">.</span>content<span class="token punctuation">)</span>

    <span class="token comment">// Without the following line, the command will not exit!</span>
    Database<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后一次更新: </span> <span class="time">7/6/2019, 9:38:14 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/adonisjs-cn/guides/security/shield-middleware.html" class="prev">
          屏蔽中间件
        </a></span> <span class="next"><a href="/adonisjs-cn/guides/deeper/event.html">
          事件
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/adonisjs-cn/assets/js/app.c41742cd.js" defer></script><script src="/adonisjs-cn/assets/js/2.b1db5fd3.js" defer></script><script src="/adonisjs-cn/assets/js/30.9173a22a.js" defer></script>
  </body>
</html>
